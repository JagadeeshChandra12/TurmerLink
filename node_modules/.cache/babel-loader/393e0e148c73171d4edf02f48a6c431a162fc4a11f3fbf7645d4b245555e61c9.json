{"ast":null,"code":"import _objectSpread from\"C:/Turmerik Bits/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useState}from'react';import{dbHelpers}from'../config/supabase';import{jsx as _jsx}from\"react/jsx-runtime\";const SubmissionContext=/*#__PURE__*/createContext();export const useSubmissions=()=>{const context=useContext(SubmissionContext);if(!context){throw new Error('useSubmissions must be used within a SubmissionProvider');}return context;};export const SubmissionProvider=_ref=>{let{children}=_ref;const[submissions,setSubmissions]=useState([{id:'SUB001',farmerId:'FARM001',farmerName:'రామయ్య',farmerPhone:'+91 9876543210',quantity:5,quality:'Grade A',price:8500,location:'నిజామాబాద్',submissionDate:'2024-01-20',status:'approved',governmentResponse:'2024-01-21',totalValue:42500,description:'ఉత్తమ నాణ్యత టర్మరిక్'},{id:'SUB002',farmerId:'FARM002',farmerName:'లక్ష్మయ్య',farmerPhone:'+91 9876543211',quantity:3,quality:'Export Grade',price:9200,location:'కరీంనగర్',submissionDate:'2024-01-19',status:'pending',governmentResponse:null,totalValue:27600,description:'ఎగుమతి నాణ్యత టర్మరిక్'},{id:'SUB003',farmerId:'FARM003',farmerName:'వెంకటేశ్వర్లు',farmerPhone:'+91 9876543212',quantity:7,quality:'Grade B',price:7800,location:'అదిలాబాద్',submissionDate:'2024-01-18',status:'rejected',governmentResponse:'2024-01-19',totalValue:54600,description:'సాధారణ నాణ్యత టర్మరిక్'}]);const addSubmission=async submission=>{const newSubmission=_objectSpread(_objectSpread({id:\"SUB\".concat(Date.now()),submissionDate:new Date().toISOString().split('T')[0]},submission),{},{status:'pending',governmentResponse:null});// Add to local state\nsetSubmissions(prev=>[newSubmission,...prev]);// Sync to government portal via Supabase\ntry{await dbHelpers.createSubmission({farmer_id:submission.farmerId,farmer_name:submission.farmerName,farmer_phone:submission.farmerPhone,product:'Turmeric',quantity:submission.quantity,quality:submission.quality,price:submission.price,location:submission.location,status:'pending',total_value:submission.totalValue||submission.quantity*submission.price,description:submission.description,submission_date:newSubmission.submissionDate});console.log('✅ Sales submitted to government portal successfully!');}catch(error){console.error('❌ Failed to sync with government portal:',error);}return newSubmission;};const updateSubmissionStatus=async(submissionId,newStatus)=>{// Update local state\nsetSubmissions(prev=>prev.map(sub=>sub.id===submissionId?_objectSpread(_objectSpread({},sub),{},{status:newStatus,governmentResponse:new Date().toISOString().split('T')[0]}):sub));// Sync status update to government portal via Supabase\ntry{const govResponse=new Date().toISOString().split('T')[0];await dbHelpers.updateSubmissionStatus(submissionId,newStatus,govResponse);console.log(\"\\u2705 Status updated to \".concat(newStatus,\" in government portal!\"));}catch(error){console.error('❌ Failed to update government portal:',error);}};const getFarmerSubmissions=farmerId=>{return submissions.filter(sub=>sub.farmerId===farmerId);};const getAllSubmissions=()=>{return submissions;};const getPendingSubmissions=()=>{return submissions.filter(sub=>sub.status==='pending');};const getApprovedSubmissions=()=>{return submissions.filter(sub=>sub.status==='approved');};const getRejectedSubmissions=()=>{return submissions.filter(sub=>sub.status==='rejected');};const value={submissions,addSubmission,updateSubmissionStatus,getFarmerSubmissions,getAllSubmissions,getPendingSubmissions,getApprovedSubmissions,getRejectedSubmissions};return/*#__PURE__*/_jsx(SubmissionContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","dbHelpers","jsx","_jsx","SubmissionContext","useSubmissions","context","Error","SubmissionProvider","_ref","children","submissions","setSubmissions","id","farmerId","farmerName","farmerPhone","quantity","quality","price","location","submissionDate","status","governmentResponse","totalValue","description","addSubmission","submission","newSubmission","_objectSpread","concat","Date","now","toISOString","split","prev","createSubmission","farmer_id","farmer_name","farmer_phone","product","total_value","submission_date","console","log","error","updateSubmissionStatus","submissionId","newStatus","map","sub","govResponse","getFarmerSubmissions","filter","getAllSubmissions","getPendingSubmissions","getApprovedSubmissions","getRejectedSubmissions","value","Provider"],"sources":["C:/Turmerik Bits/src/contexts/SubmissionContext.js"],"sourcesContent":["import React, { createContext, useContext, useState } from 'react';\r\nimport { dbHelpers } from '../config/supabase';\r\n\r\nconst SubmissionContext = createContext();\r\n\r\nexport const useSubmissions = () => {\r\n  const context = useContext(SubmissionContext);\r\n  if (!context) {\r\n    throw new Error('useSubmissions must be used within a SubmissionProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const SubmissionProvider = ({ children }) => {\r\n  const [submissions, setSubmissions] = useState([\r\n    {\r\n      id: 'SUB001',\r\n      farmerId: 'FARM001',\r\n      farmerName: 'రామయ్య',\r\n      farmerPhone: '+91 9876543210',\r\n      quantity: 5,\r\n      quality: 'Grade A',\r\n      price: 8500,\r\n      location: 'నిజామాబాద్',\r\n      submissionDate: '2024-01-20',\r\n      status: 'approved',\r\n      governmentResponse: '2024-01-21',\r\n      totalValue: 42500,\r\n      description: 'ఉత్తమ నాణ్యత టర్మరిక్'\r\n    },\r\n    {\r\n      id: 'SUB002',\r\n      farmerId: 'FARM002',\r\n      farmerName: 'లక్ష్మయ్య',\r\n      farmerPhone: '+91 9876543211',\r\n      quantity: 3,\r\n      quality: 'Export Grade',\r\n      price: 9200,\r\n      location: 'కరీంనగర్',\r\n      submissionDate: '2024-01-19',\r\n      status: 'pending',\r\n      governmentResponse: null,\r\n      totalValue: 27600,\r\n      description: 'ఎగుమతి నాణ్యత టర్మరిక్'\r\n    },\r\n    {\r\n      id: 'SUB003',\r\n      farmerId: 'FARM003',\r\n      farmerName: 'వెంకటేశ్వర్లు',\r\n      farmerPhone: '+91 9876543212',\r\n      quantity: 7,\r\n      quality: 'Grade B',\r\n      price: 7800,\r\n      location: 'అదిలాబాద్',\r\n      submissionDate: '2024-01-18',\r\n      status: 'rejected',\r\n      governmentResponse: '2024-01-19',\r\n      totalValue: 54600,\r\n      description: 'సాధారణ నాణ్యత టర్మరిక్'\r\n    }\r\n  ]);\r\n\r\n  const addSubmission = async (submission) => {\r\n    const newSubmission = {\r\n      id: `SUB${Date.now()}`,\r\n      submissionDate: new Date().toISOString().split('T')[0],\r\n      ...submission,\r\n      status: 'pending',\r\n      governmentResponse: null\r\n    };\r\n    \r\n    // Add to local state\r\n    setSubmissions(prev => [newSubmission, ...prev]);\r\n    \r\n    // Sync to government portal via Supabase\r\n    try {\r\n      await dbHelpers.createSubmission({\r\n        farmer_id: submission.farmerId,\r\n        farmer_name: submission.farmerName,\r\n        farmer_phone: submission.farmerPhone,\r\n        product: 'Turmeric',\r\n        quantity: submission.quantity,\r\n        quality: submission.quality,\r\n        price: submission.price,\r\n        location: submission.location,\r\n        status: 'pending',\r\n        total_value: submission.totalValue || (submission.quantity * submission.price),\r\n        description: submission.description,\r\n        submission_date: newSubmission.submissionDate\r\n      });\r\n      console.log('✅ Sales submitted to government portal successfully!');\r\n    } catch (error) {\r\n      console.error('❌ Failed to sync with government portal:', error);\r\n    }\r\n    \r\n    return newSubmission;\r\n  };\r\n\r\n  const updateSubmissionStatus = async (submissionId, newStatus) => {\r\n    // Update local state\r\n    setSubmissions(prev => \r\n      prev.map(sub => \r\n        sub.id === submissionId \r\n          ? { \r\n              ...sub, \r\n              status: newStatus,\r\n              governmentResponse: new Date().toISOString().split('T')[0]\r\n            }\r\n          : sub\r\n      )\r\n    );\r\n    \r\n    // Sync status update to government portal via Supabase\r\n    try {\r\n      const govResponse = new Date().toISOString().split('T')[0];\r\n      await dbHelpers.updateSubmissionStatus(submissionId, newStatus, govResponse);\r\n      console.log(`✅ Status updated to ${newStatus} in government portal!`);\r\n    } catch (error) {\r\n      console.error('❌ Failed to update government portal:', error);\r\n    }\r\n  };\r\n\r\n  const getFarmerSubmissions = (farmerId) => {\r\n    return submissions.filter(sub => sub.farmerId === farmerId);\r\n  };\r\n\r\n  const getAllSubmissions = () => {\r\n    return submissions;\r\n  };\r\n\r\n  const getPendingSubmissions = () => {\r\n    return submissions.filter(sub => sub.status === 'pending');\r\n  };\r\n\r\n  const getApprovedSubmissions = () => {\r\n    return submissions.filter(sub => sub.status === 'approved');\r\n  };\r\n\r\n  const getRejectedSubmissions = () => {\r\n    return submissions.filter(sub => sub.status === 'rejected');\r\n  };\r\n\r\n  const value = {\r\n    submissions,\r\n    addSubmission,\r\n    updateSubmissionStatus,\r\n    getFarmerSubmissions,\r\n    getAllSubmissions,\r\n    getPendingSubmissions,\r\n    getApprovedSubmissions,\r\n    getRejectedSubmissions\r\n  };\r\n\r\n  return (\r\n    <SubmissionContext.Provider value={value}>\r\n      {children}\r\n    </SubmissionContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"qGAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CAClE,OAASC,SAAS,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE/C,KAAM,CAAAC,iBAAiB,cAAGN,aAAa,CAAC,CAAC,CAEzC,MAAO,MAAM,CAAAO,cAAc,CAAGA,CAAA,GAAM,CAClC,KAAM,CAAAC,OAAO,CAAGP,UAAU,CAACK,iBAAiB,CAAC,CAC7C,GAAI,CAACE,OAAO,CAAE,CACZ,KAAM,IAAI,CAAAC,KAAK,CAAC,yDAAyD,CAAC,CAC5E,CACA,MAAO,CAAAD,OAAO,CAChB,CAAC,CAED,MAAO,MAAM,CAAAE,kBAAkB,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC7C,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGZ,QAAQ,CAAC,CAC7C,CACEa,EAAE,CAAE,QAAQ,CACZC,QAAQ,CAAE,SAAS,CACnBC,UAAU,CAAE,QAAQ,CACpBC,WAAW,CAAE,gBAAgB,CAC7BC,QAAQ,CAAE,CAAC,CACXC,OAAO,CAAE,SAAS,CAClBC,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,YAAY,CACtBC,cAAc,CAAE,YAAY,CAC5BC,MAAM,CAAE,UAAU,CAClBC,kBAAkB,CAAE,YAAY,CAChCC,UAAU,CAAE,KAAK,CACjBC,WAAW,CAAE,uBACf,CAAC,CACD,CACEZ,EAAE,CAAE,QAAQ,CACZC,QAAQ,CAAE,SAAS,CACnBC,UAAU,CAAE,WAAW,CACvBC,WAAW,CAAE,gBAAgB,CAC7BC,QAAQ,CAAE,CAAC,CACXC,OAAO,CAAE,cAAc,CACvBC,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,UAAU,CACpBC,cAAc,CAAE,YAAY,CAC5BC,MAAM,CAAE,SAAS,CACjBC,kBAAkB,CAAE,IAAI,CACxBC,UAAU,CAAE,KAAK,CACjBC,WAAW,CAAE,wBACf,CAAC,CACD,CACEZ,EAAE,CAAE,QAAQ,CACZC,QAAQ,CAAE,SAAS,CACnBC,UAAU,CAAE,eAAe,CAC3BC,WAAW,CAAE,gBAAgB,CAC7BC,QAAQ,CAAE,CAAC,CACXC,OAAO,CAAE,SAAS,CAClBC,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,WAAW,CACrBC,cAAc,CAAE,YAAY,CAC5BC,MAAM,CAAE,UAAU,CAClBC,kBAAkB,CAAE,YAAY,CAChCC,UAAU,CAAE,KAAK,CACjBC,WAAW,CAAE,wBACf,CAAC,CACF,CAAC,CAEF,KAAM,CAAAC,aAAa,CAAG,KAAO,CAAAC,UAAU,EAAK,CAC1C,KAAM,CAAAC,aAAa,CAAAC,aAAA,CAAAA,aAAA,EACjBhB,EAAE,OAAAiB,MAAA,CAAQC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAE,CACtBX,cAAc,CAAE,GAAI,CAAAU,IAAI,CAAC,CAAC,CAACE,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EACnDP,UAAU,MACbL,MAAM,CAAE,SAAS,CACjBC,kBAAkB,CAAE,IAAI,EACzB,CAED;AACAX,cAAc,CAACuB,IAAI,EAAI,CAACP,aAAa,CAAE,GAAGO,IAAI,CAAC,CAAC,CAEhD;AACA,GAAI,CACF,KAAM,CAAAlC,SAAS,CAACmC,gBAAgB,CAAC,CAC/BC,SAAS,CAAEV,UAAU,CAACb,QAAQ,CAC9BwB,WAAW,CAAEX,UAAU,CAACZ,UAAU,CAClCwB,YAAY,CAAEZ,UAAU,CAACX,WAAW,CACpCwB,OAAO,CAAE,UAAU,CACnBvB,QAAQ,CAAEU,UAAU,CAACV,QAAQ,CAC7BC,OAAO,CAAES,UAAU,CAACT,OAAO,CAC3BC,KAAK,CAAEQ,UAAU,CAACR,KAAK,CACvBC,QAAQ,CAAEO,UAAU,CAACP,QAAQ,CAC7BE,MAAM,CAAE,SAAS,CACjBmB,WAAW,CAAEd,UAAU,CAACH,UAAU,EAAKG,UAAU,CAACV,QAAQ,CAAGU,UAAU,CAACR,KAAM,CAC9EM,WAAW,CAAEE,UAAU,CAACF,WAAW,CACnCiB,eAAe,CAAEd,aAAa,CAACP,cACjC,CAAC,CAAC,CACFsB,OAAO,CAACC,GAAG,CAAC,sDAAsD,CAAC,CACrE,CAAE,MAAOC,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,0CAA0C,CAAEA,KAAK,CAAC,CAClE,CAEA,MAAO,CAAAjB,aAAa,CACtB,CAAC,CAED,KAAM,CAAAkB,sBAAsB,CAAG,KAAAA,CAAOC,YAAY,CAAEC,SAAS,GAAK,CAChE;AACApC,cAAc,CAACuB,IAAI,EACjBA,IAAI,CAACc,GAAG,CAACC,GAAG,EACVA,GAAG,CAACrC,EAAE,GAAKkC,YAAY,CAAAlB,aAAA,CAAAA,aAAA,IAEdqB,GAAG,MACN5B,MAAM,CAAE0B,SAAS,CACjBzB,kBAAkB,CAAE,GAAI,CAAAQ,IAAI,CAAC,CAAC,CAACE,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAE5DgB,GACN,CACF,CAAC,CAED;AACA,GAAI,CACF,KAAM,CAAAC,WAAW,CAAG,GAAI,CAAApB,IAAI,CAAC,CAAC,CAACE,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAC1D,KAAM,CAAAjC,SAAS,CAAC6C,sBAAsB,CAACC,YAAY,CAAEC,SAAS,CAAEG,WAAW,CAAC,CAC5ER,OAAO,CAACC,GAAG,6BAAAd,MAAA,CAAwBkB,SAAS,0BAAwB,CAAC,CACvE,CAAE,MAAOH,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,uCAAuC,CAAEA,KAAK,CAAC,CAC/D,CACF,CAAC,CAED,KAAM,CAAAO,oBAAoB,CAAItC,QAAQ,EAAK,CACzC,MAAO,CAAAH,WAAW,CAAC0C,MAAM,CAACH,GAAG,EAAIA,GAAG,CAACpC,QAAQ,GAAKA,QAAQ,CAAC,CAC7D,CAAC,CAED,KAAM,CAAAwC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,MAAO,CAAA3C,WAAW,CACpB,CAAC,CAED,KAAM,CAAA4C,qBAAqB,CAAGA,CAAA,GAAM,CAClC,MAAO,CAAA5C,WAAW,CAAC0C,MAAM,CAACH,GAAG,EAAIA,GAAG,CAAC5B,MAAM,GAAK,SAAS,CAAC,CAC5D,CAAC,CAED,KAAM,CAAAkC,sBAAsB,CAAGA,CAAA,GAAM,CACnC,MAAO,CAAA7C,WAAW,CAAC0C,MAAM,CAACH,GAAG,EAAIA,GAAG,CAAC5B,MAAM,GAAK,UAAU,CAAC,CAC7D,CAAC,CAED,KAAM,CAAAmC,sBAAsB,CAAGA,CAAA,GAAM,CACnC,MAAO,CAAA9C,WAAW,CAAC0C,MAAM,CAACH,GAAG,EAAIA,GAAG,CAAC5B,MAAM,GAAK,UAAU,CAAC,CAC7D,CAAC,CAED,KAAM,CAAAoC,KAAK,CAAG,CACZ/C,WAAW,CACXe,aAAa,CACboB,sBAAsB,CACtBM,oBAAoB,CACpBE,iBAAiB,CACjBC,qBAAqB,CACrBC,sBAAsB,CACtBC,sBACF,CAAC,CAED,mBACEtD,IAAA,CAACC,iBAAiB,CAACuD,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAhD,QAAA,CACtCA,QAAQ,CACiB,CAAC,CAEjC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}